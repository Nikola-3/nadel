name: synthetic hydration works when an ancestor field has been renamed
overallSchema:
  IssueService: |
    service IssueService {
      type DevOpsIssue => renamed from Issue {
        id: ID
      }
      type DevOpsRelationship => renamed from Relationship {
        devOpsIssue: DevOpsIssue => hydrated from IssueService.syntheticIssue.issue(id: $source.issueId)
      }
      type DevOpsRelationshipConnection => renamed from RelationshipConnection {
        devOpsNodes: [DevOpsRelationship] => renamed from nodes
      }
      type SyntheticIssue {
        devOpsIssue(id: ID): DevOpsIssue => renamed from issue
      }
      type Query {
        devOpsRelationships: DevOpsRelationshipConnection => renamed from relationships
      }
    }
underlyingSchema:
  IssueService: |
    type Issue {
      id: ID
    }

    type Query {
      relationships: RelationshipConnection
      syntheticIssue: SyntheticIssue
    }

    type Relationship {
      issueId: ID
    }

    type RelationshipConnection {
      nodes: [Relationship]
    }

    type SyntheticIssue {
      issue(id: ID): Issue
    }
query: |
  query {
    devOpsRelationships {
      devOpsNodes {
        devOpsIssue {
          id
        }
      }
    }
  }
variables: {}
serviceCalls:
  current:
    - request:
        query: |
          query nadel_2_IssueService {
            relationships {
              nodes {
                issueId
              }
            }
          }
        variables: {}
        operationName: nadel_2_IssueService
      # language=JSON
      response: |-
        {
          "data": {
            "relationships": {
              "nodes": [
                {
                  "issueId": "1"
                }
              ]
            }
          },
          "extensions": {}
        }
    - request:
        query: |
          query nadel_2_IssueService {
            syntheticIssue {
              issue(id: "1") {
                id
              }
            }
          }
        variables: {}
        operationName: nadel_2_IssueService
      # language=JSON
      response: |-
        {
          "data": {
            "syntheticIssue": {
              "issue": {
                "id": "1"
              }
            }
          },
          "extensions": {}
        }
# language=JSON
response: |-
  {
    "data": {
      "devOpsRelationships": {
        "devOpsNodes": [
          {
            "devOpsIssue": {
              "id": "1"
            }
          }
        ]
      }
    },
    "extensions": {}
  }
